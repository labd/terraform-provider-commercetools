---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "commercetools_subscription Resource - terraform-provider-commercetools"
subcategory: ""
description: |-
  Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.
  See also the Subscriptions API Documentation https://docs.commercetools.com/api/projects/subscriptions
---

# commercetools_subscription (Resource)

Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.

See also the [Subscriptions API Documentation](https://docs.commercetools.com/api/projects/subscriptions)

## Example Usage

```terraform
resource "commercetools_subscription" "my-sqs-subscription" {
  key = "my-sqs-subscription-key"
  destination {
    type          = "SQS"
    queue_url     = aws_sqs_queue.your-queue.id
    access_key    = aws_iam_access_key.ct.id
    access_secret = aws_iam_access_key.ct.secret
    region        = "eu-west-1"
  }

  changes {
    resource_type_ids = ["product"]
  }

  message {
    resource_type_id = "product"
    types            = ["ProductPublished", "ProductCreated"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `changes` (Block Set) The change notifications subscribed to (see [below for nested schema](#nestedblock--changes))
- `destination` (Block List) (see [below for nested schema](#nestedblock--destination))
- `format` (Block List) The [format](https://docs.commercetools.com/api/projects/subscriptions#format) in which the payload is delivered (see [below for nested schema](#nestedblock--format))
- `key` (String) Timestamp of the last Terraform update of the order.
- `message` (Block Set) The messages subscribed to (see [below for nested schema](#nestedblock--message))

### Read-Only

- `id` (String) The ID of this resource.
- `version` (Number)

<a id="nestedblock--changes"></a>
### Nested Schema for `changes`

Required:

- `resource_type_ids` (List of String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)


<a id="nestedblock--destination"></a>
### Nested Schema for `destination`

Required:

- `type` (String)

Optional:

- `access_key` (String, Sensitive)
- `access_secret` (String, Sensitive)
- `account_id` (String)
- `connection_string` (String)
- `project_id` (String)
- `queue_url` (String)
- `region` (String)
- `topic` (String)
- `topic_arn` (String)
- `uri` (String)


<a id="nestedblock--format"></a>
### Nested Schema for `format`

Optional:

- `cloud_events_version` (String) For CloudEvents
- `type` (String)


<a id="nestedblock--message"></a>
### Nested Schema for `message`

Required:

- `resource_type_id` (String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)
- `types` (List of String) types must contain valid message types for this resource, for example for resource type product the message type ProductPublished is valid. If no types of messages are given, the subscription is valid for all messages of this resource
