---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "commercetools_subscription Resource - terraform-provider-commercetools"
subcategory: ""
description: |-
  Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.
  See also the Subscriptions API Documentation https://docs.commercetools.com/api/projects/subscriptions
---

# commercetools_subscription (Resource)

Subscriptions allow you to be notified of new messages or changes via a Message Queue of your choice. Subscriptions are used to trigger an asynchronous background process in response to an event on the commercetools platform. Common use cases include sending an Order Confirmation Email, charging a Credit Card after the delivery has been made, or synchronizing customer accounts to a Customer Relationship Management (CRM) system.

See also the [Subscriptions API Documentation](https://docs.commercetools.com/api/projects/subscriptions)

## Example Usage

```terraform
resource "commercetools_subscription" "my-sqs-subscription" {
  key = "my-sqs-subscription-key"
  destination {
    type          = "SQS"
    queue_url     = aws_sqs_queue.your-queue.id
    access_key    = aws_iam_access_key.ct.id
    access_secret = aws_iam_access_key.ct.secret
    region        = "eu-west-1"
  }

  changes {
    resource_type_ids = ["product"]
  }

  message {
    resource_type_id = "product"
    types            = ["ProductPublished", "ProductCreated"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (Block List, Min: 1, Max: 1) The Message Queue into which the notifications are to be sentSee also the [Destination API Docs](https://docs.commercetools.com/api/projects/subscriptions#destination) (see [below for nested schema](#nestedblock--destination))

### Optional

- `changes` (Block List) The change notifications subscribed to (see [below for nested schema](#nestedblock--changes))
- `format` (Block List, Max: 1) The [format](https://docs.commercetools.com/api/projects/subscriptions#format) in which the payload is delivered (see [below for nested schema](#nestedblock--format))
- `key` (String) User-specific unique identifier for the subscription
- `message` (Block List) The messages subscribed to (see [below for nested schema](#nestedblock--message))

### Read-Only

- `id` (String) The ID of this resource.
- `version` (Number)

<a id="nestedblock--destination"></a>
### Nested Schema for `destination`

Required:

- `type` (String)

Optional:

- `access_key` (String, Sensitive) For AWS SNS / SQS / Azure Event Grid
- `access_secret` (String, Sensitive) For AWS SNS / SQS
- `account_id` (String)
- `connection_string` (String, Sensitive) For Azure Service Bus
- `project_id` (String) For Google Pub Sub
- `queue_url` (String) For AWS SQS
- `region` (String)
- `topic` (String) For Google Pub Sub
- `topic_arn` (String) For AWS SNS
- `uri` (String) For Azure Event Grid


<a id="nestedblock--changes"></a>
### Nested Schema for `changes`

Optional:

- `resource_type_ids` (List of String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)


<a id="nestedblock--format"></a>
### Nested Schema for `format`

Required:

- `type` (String)

Optional:

- `cloud_events_version` (String) For CloudEvents


<a id="nestedblock--message"></a>
### Nested Schema for `message`

Optional:

- `resource_type_id` (String) [Resource Type ID](https://docs.commercetools.com/api/projects/subscriptions#changesubscription)
- `types` (List of String) types must contain valid message types for this resource, for example for resource type product the message type ProductPublished is valid. If no types of messages are given, the subscription is valid for all messages of this resource


