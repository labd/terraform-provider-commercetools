---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "commercetools_api_extension Resource - terraform-provider-commercetools"
subcategory: ""
description: |-
  Create a new API extension to extend the bevahiour of an API with business logic. Note that API extensions affect the performance of the API it is extending. If it fails, the whole API call fails
  Also see the API Extension API Documentation https://docs.commercetools.com/api/projects/api-extensions
---

# commercetools_api_extension (Resource)

Create a new API extension to extend the bevahiour of an API with business logic. Note that API extensions affect the performance of the API it is extending. If it fails, the whole API call fails 

Also see the [API Extension API Documentation](https://docs.commercetools.com/api/projects/api-extensions)

## Example Usage

```terraform
resource "commercetools_api_extension" "my-extension" {
  key = "test-case"

  destination = {
    type                 = "HTTP"
    url                  = "https://example.com"
    authorization_header = "Basic 12345"
  }

  trigger {
    resource_type_id = "customer"
    actions          = ["Create", "Update"]
  }
}
```

### Azure Functions

The `destination` field supports Azure functions. In this case pass the `azure_authentication` value instead
of `authorization_header` like so:

```hcl
resource "commercetools_api_extension" "my-extension" {
  key = "test-case"

  destination = {
    type = "http"
    url = "https://some_azure_url"
    azure_authentication = "an_azure_function_key"
  }

  trigger {
    resource_type_id = "payment"
    actions = ["Create", "Update"]
  }

  timeout_in_ms = 2000
}
```

### AWS Lambda
The `destination` field supports AWS Lambda functions. In this case set `type` to be `awslambda` and pass
`arn`, `access_key` and `access_secret` fields like so:

```hcl
resource "commercetools_api_extension" "my-extension" {
  key = "test-case"

  destination = {
    type = "awslambda"
    arn = "arn:aws:lambda:some_lambda_arn"
    access_key = "access_key_123"
    access_secret = "123secretabc"
  }

  trigger {
    resource_type_id = "customer"
    actions = ["Create", "Update"]
  }

  timeout_in_ms = 2000
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **destination** (Map of String) [Destination](https://docs.commercetools.com/api/projects/api-extensions#destination) Details where the extension can be reached
- **trigger** (Block List, Min: 1) Array of [Trigger](https://docs.commercetools.com/api/projects/api-extensions#trigger) Describes what triggers the extension (see [below for nested schema](#nestedblock--trigger))

### Optional

- **id** (String) The ID of this resource.
- **key** (String) User-specific unique identifier for the extension
- **timeout_in_ms** (Number) Extension timeout in milliseconds

### Read-Only

- **version** (Number)

<a id="nestedblock--trigger"></a>
### Nested Schema for `trigger`

Required:

- **actions** (List of String) Currently, Create and Update are supported
- **resource_type_id** (String) Currently, cart, order, payment, and customer are supported


